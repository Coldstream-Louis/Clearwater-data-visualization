{"remainingRequest":"/Users/chenyulei/Downloads/frontend18v/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyulei/Downloads/frontend18v/src/views/ModifyView.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/chenyulei/Downloads/frontend18v/src/views/ModifyView.vue","mtime":1553056840961},{"path":"/Users/chenyulei/Downloads/frontend18v/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/chenyulei/Downloads/frontend18v/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenyulei/Downloads/frontend18v/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenyulei/Downloads/frontend18v/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenyulei/Downloads/frontend18v/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ninput.el-upload__input {\n    visibility: hidden;\n    position: absolute;\n}\n\n.text {\n    font-size: 14px;\n}\n\n.item {\n    margin-bottom: 15px;\n}\n\n.input-with-select .el-input-group__prepend {\n    background-color: #fff;\n}\n\n.clearfix:before,\n.clearfix:after {\n    display: table;\n    content: \"\";\n}\n\n.clearfix:after {\n    clear: both\n}\n\n.box-card {\n    width: 300px;\n}\n",{"version":3,"sources":["ModifyView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"ModifyView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <el-container style=\"margin:20px;\">\n        <el-card class=\"box-card\" v-for=\"card in cards\" :key=\"card.name\" style=\"margin-right:25px;\">\n            <div slot=\"header\" class=\"clearfix\">\n                <span>{{card.name}}\n                </span>\n                <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"handleUpload(card.type)\">{{card.uploadText}}</el-button>\n            </div>\n            <div class=\"text item\">\n                {{card.escri}}\n            </div>\n        </el-card>\n\n        <el-dialog title=\"上传文件\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\n            <el-upload class=\"upload-demo\" ref=\"upload\" action=\"https://jsonplaceholder.typicode.com/posts/\"\n                :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :file-list=\"fileList\" :auto-upload=\"false\"\n                :accept=\"fileType\" :on-progress=\"uploadOnProgress\">\n                <!-- <el-row> -->\n                <el-button slot=\"trigger\" size=\"small\" plain type=\"primary\">选取文件</el-button>\n                <el-button style=\"margin-left: 15px;\" size=\"small\" type=\"success\" plain @click=\"submitUpload\">上传到服务器</el-button>\n                <!-- </el-row> -->\n                <el-row style=\"width:40%;margin: 15px 0;\">\n                    <el-input v-model=\"systemNameYaml\" placeholder=\"请输入系统名称\" v-if=\"isYaml\" size=\"small\"></el-input>\n                    <el-select v-model=\"systemNameCSV\" placeholder=\"请选择系统名称\" v-if=\"!isYaml\" size=\"small\">\n                        <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                        </el-option>\n                    </el-select>\n                </el-row>\n                <div slot=\"tip\" class=\"el-upload__tip\" style=\"margin-bottom:15px;\">只能上传{{this.fileType}}文件，且不超过500kb</div>\n            </el-upload>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n        <el-dialog title=\"输入地址\" :visible.sync=\"dialogURLVisible\" width=\"30%\" :before-close=\"handleClose\">\n            <!-- <el-input placeholder=\"请输入内容\" v-model=\"inputURL\" style=\"margin: 15px 0px;\">\n                <template slot=\"prepend\">http://</template>\n            </el-input> -->\n            <el-select v-model=\"selectedElement\" placeholder=\"请选择element\">\n                <el-option v-for=\"item in elements\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n            </el-select>\n\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogURLVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"URLConfirmClick\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </el-container>\n</template>\n\n<style>\n    input.el-upload__input {\n        visibility: hidden;\n        position: absolute;\n    }\n\n    .text {\n        font-size: 14px;\n    }\n\n    .item {\n        margin-bottom: 15px;\n    }\n\n    .input-with-select .el-input-group__prepend {\n        background-color: #fff;\n    }\n\n    .clearfix:before,\n    .clearfix:after {\n        display: table;\n        content: \"\";\n    }\n\n    .clearfix:after {\n        clear: both\n    }\n\n    .box-card {\n        width: 300px;\n    }\n</style>\n\n<script>\n    let axios = require('axios')\n    export default {\n        name: 'modify',\n        data() {\n            return {\n                selectedElement: '',\n                elements: [],\n                systemNameYaml: '',\n                systemNameCSV: '',\n                options: [{\n                    value: '选项1',\n                    label: '黄金糕'\n                }, {\n                    value: '选项2',\n                    label: '双皮奶'\n                }, {\n                    value: '选项3',\n                    label: '蚵仔煎'\n                }, {\n                    value: '选项4',\n                    label: '龙须面'\n                }, {\n                    value: '选项5',\n                    label: '北京烤鸭'\n                }],\n                isYaml: true,\n                fileName: '',\n                inputURL: '',\n                dialogVisible: false,\n                dialogURLVisible: false,\n                fileList: [\n                    //     {\n                    //     name: 'food.jpeg',\n                    //     url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'\n                    // }, {\n                    //     name: 'food2.jpeg',\n                    //     url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100'\n                    // }\n                ],\n                cards: [{\n                        name: '上传yaml部署文件',\n                        type: '.yaml',\n                        escri: '上传部署配置文件，系统将自动提取节点间的关系。',\n                        uploadText: '上传文件'\n                    },\n                    {\n                        name: '上传json服务调用关系文件',\n                        type: '.json',\n                        escri: '上传服务调用关系文件，系统将自动提取节点间的关系。',\n                        uploadText: '上传文件'\n                    },\n                    {\n                        name: '获取目标系统部署数据',\n                        type: '.pod',\n                        escri: '获取目标系统部署数据，系统将自动提取pods与节点间的关系。',\n                        uploadText: '输入地址'\n                    },\n                    {\n                        name: '上传csv数据集文件',\n                        type: '.csv',\n                        escri: '输入csv数据集，系统将自动提取性能与数据集列间的关系。',\n                        uploadText: '上传文件'\n                    },\n                ],\n                fileType: '.yaml'\n\n            };\n        },\n        methods: {\n            URLConfirmClick() {\n                this.dialogURLVisible = false;\n                axios.post(\n                        'http://10.60.38.137:9999/api/addNods?Url=http://10.60.38.182:5525/tool/api/v1.0/get_pods/' +\n                        this.selectedElement)\n                    .then((response) => {\n                        console.log(response.data);\n                        this.$message({\n                            message: 'Nodes信息输入成功！',\n                            type: 'success'\n                        });\n                    })\n            },\n            uploadOnProgress(e, file, fileList) { //开始上传\n\n                console.log('file', file)\n                console.log(fileList)\n\n\n                if (this.fileName == file.name) {\n                    return;\n                } else {\n                    this.fileName = file.name;\n                }\n\n                var oneFile = file.raw;\n                var formdata = new FormData(); // 创建form对象\n                formdata.append('file', oneFile);\n\n                let config = {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                }; //添加请求头\n\n                let uploadURL = 'http://10.60.38.137:9999/api/yamldeal';\n\n                console.log(this.fileType)\n\n                if (this.fileType == '.yaml') {\n                    uploadURL = 'http://10.60.38.137:9999/api/yamldeal?systemName=' + this.systemNameYaml;\n                    console.log('yaml')\n                } else if (this.fileType == '.csv') { // .csv\n                    uploadURL = 'http://10.60.38.137:9999/api/fileupdate?systemName=' + this.systemNameCSV;\n                    console.log('csv')\n                } else {\n                    uploadURL = 'http://10.60.38.137:9999/api/addServiceRelation?systemName=' + this.systemNameCSV;\n                    console.log('json')\n                }\n\n                console.log(uploadURL)\n                axios.post(uploadURL,\n                    formdata,\n                    config).then((response) => { //这里的/xapi/upimage为接口\n                    console.log(response.data);\n                    this.$message({\n                        message: '文件上传成功！',\n                        type: 'success'\n                    });\n                })\n            },\n            handleUpload(fileType) {\n                this.fileType = fileType;\n                console.log(fileType)\n                if (this.fileType == '.yaml') {\n                    this.isYaml = true;\n                } else {\n                    this.isYaml = false;\n                }\n                if (fileType == '.pod') {\n                    this.dialogURLVisible = true\n                } else {\n                    this.dialogVisible = true\n                }\n            },\n            handleClose(done) {\n                this.$confirm('确认关闭？')\n                    .then(_ => {\n                        done();\n                    })\n                    .catch(_ => {});\n            },\n            submitUpload() {\n                this.$refs.upload.submit();\n            },\n            handleRemove(file, fileList) {\n                console.log(file, fileList);\n            },\n            handlePreview(file) {\n                console.log(file);\n            }\n        },\n        created() {\n            axios.get('http://10.60.38.137:9999/api/getElementName')\n                .then((response) => {\n                    let element = response.data.Element;\n                    element.forEach(element => {\n                        this.elements.push({\n                            label: element,\n                            value: element\n                        })\n                    });\n                })\n            axios.get('http://10.60.38.137:9999/api/getSystem')\n                .then((response) => {\n                    this.options = [];\n                    response.data.nodes.forEach(element => {\n                        this.options.push({\n                            value: element.name,\n                            label: element.name,\n                        })\n                    });\n                })\n        }\n    }\n</script>"]}]}